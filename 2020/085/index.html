<!doctype html><html lang=zh-cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="chrome=1"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="noodp"><meta name=author content="Mogeko"><meta name=description content="Mogeko 的个人博客"><meta name=keywords content="blog,KMS,Hugo,GNU/Linux,Linux,Ubuntu,Rusty Lake: Roots,Hollow Knight,空洞骑士"><link rel=prev href=https://mogeko.me/2020/084/><link rel=canonical href=https://mogeko.me/2020/085/><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=manifest href=/site.webmanifest><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#da532c"><meta name=theme-color content="#ffffff"><title>Fish Shell 入门 | Mogeko`s Blog</title><meta name=title content="Fish Shell 入门 | Mogeko`s Blog"><link rel=stylesheet href=/css/main.min.css><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/mogeko.me"},"articleSection":"posts","name":"Fish Shell 入门","headline":"Fish Shell 入门","description":"friendly interactive shell","inLanguage":"zh-cn","author":"Mogeko","creator":"Mogeko","publisher":"Mogeko","accountablePerson":"Mogeko","copyrightHolder":"Mogeko","copyrightYear":"2020","datePublished":"2020-11-23 20:35:03 \u002b0100 \u002b0100","dateModified":"2020-11-23 20:35:03 \u002b0100 \u002b0100","url":"https:\/\/mogeko.me\/2020\/085\/","wordCount":"1106","keywords":["gnu\/linux","Mogeko`s Blog"]}</script></head><body><div class=wrapper><nav class=navbar><progress class=content_progress max=0 value=0></progress><div class=container><div class="navbar-header header-back2home-logo"><span class=logo_mark>>$</span>
<a href=https://mogeko.me><span class=logo_text>cd /home/</span>
<span class=logo_cursor></span></a></div><div class=navbar-right><span class=menu><a class=menu-item href=/tools/>Tools</a>
<a class=menu-item href=/posts/>Blog</a>
<a class=menu-item href=/categories/>Categories</a>
<a class=menu-item href=/tags/>Tags</a>
<a class=menu-item href=/about/>About</a>
<a class=menu-item href=/tools/></a><a class=menu-item href=/about/ title=Mogeko>Mogeko</a>
<span class=divide></span><a href=javascript:void(0); class=theme-switch><i class="iconfont icon-dark-mode"></i></a></span></div></div></nav><nav class=navbar-mobile id=nav-mobile style=display:none><progress class=content_progress max=0 value=0></progress><div class=container><div class=navbar><div class="navbar-header header-logo"><a href=https://mogeko.me>Mogeko`s Blog</a></div><div class=navbar-right><div><a href=javascript:void(0); class=theme-switch><i class="iconfont icon-dark-mode"></i></a></div><div class=menu-toggle><span></span><span></span><span></span></div></div></div><div class=menu id=mobile-menu><nav class=mb-md><a class=menu-item href=/tools/><h3>Tools</h3><div class=menu-active></div></a><a class=menu-item href=/posts/><h3>Blog</h3><div class=menu-active></div></a><a class=menu-item href=/categories/><h3>Categories</h3><div class=menu-active></div></a><a class=menu-item href=/tags/><h3>Tags</h3><div class=menu-active></div></a><a class=menu-item href=/about/><h3>About</h3><div class=menu-active></div></a><a class=menu-item href=/tools/><h3></h3><div class=menu-active></div></a><a class=menu-item href=/about/ title=Mogeko><h3>Mogeko</h3><div class=menu-active></div></a></nav></div></div></nav><main class=main><div class=container><article class=post-warp itemscope itemtype=http://schema.org/Article><header class=post-header><h1 class=post-title itemprop="name headline">Fish Shell 入门</h1><div class=post-meta>Written by <a itemprop=name href=https://mogeko.me rel=author>Mogeko</a> with ♥
<span class=post-time>on <time datetime=2020-11-23 itemprop=datePublished>November 23, 2020</time></span>
in
<i class="iconfont icon-folder"></i><span class=post-category></span><span class=post-word-count>1106 words</span></div></header><div class=post-content><p>三年啊！我终于忍受不了 <code>oh-my-zsh</code> 的臃肿，将日常 Shell 从 zsh 切换到了 fish shell。</p><p>虽然名为 fish，但它跟“鱼”一点关系都没有，它其实是 “the <span style=color:red;font-weight:700>f</span>riendly <span style=color:red;font-weight:700>i</span>nteractive <span style=color:red;font-weight:700>sh</span>ell” 的缩写。它最大特点就是方便易用。很多其他 Shell 需要折腾才有的功能，Fish 默认提供，并且开箱即用。</p><p>如果你想要一个好用的 Shell，又不喜欢折腾，那么你一定要尝试一下 fish shell。</p><p><img src=https://mogeko.github.io/blog-images/r/085/fish_shell.jpg alt="fish shell" loading=lazy></p><h2 id=安装>安装</h2><p>在 Archlinux 中安装：</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-plaintext data-lang=plaintext>sudo pacman -S fish
</code></pre></div><p>在 MacOS 中安装：</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-plaintext data-lang=plaintext>brew install fish
</code></pre></div><p>其他系统的安装请参考<a href=http://fishshell.com/#platform_tabs>官方网站</a>。</p><p>安装好后直接在命令行中输入 <code>fish</code> 就可以运行 fish shell 了。</p><p>想要将 fish 设为默认 Shell，只需要执行：</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-plaintext data-lang=plaintext>
<span style=color:#75715e># GNU/Linux 中</span>
<span>chsh -s /usr/bin/fish</span>
<br>
<span style=color:#75715e># MacOS 中</span>
<span>chsh -s /usr/local/bin/ fish</span>
</code></pre></div><h2 id=命令行着色>命令行着色</h2><p>fish 与 Bash 最大的不同，也是 fish 最好用的点之一便是命令行着色(不同主题可能有所区别)：</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-plaintext data-lang=plaintext>
<span style=color:#75715e># 无效命令显示为红色</span>
<span>$<span> <span style=color:red>cl</span>
<span style=color:#75715e># 有效命令显示为蓝色</span>
<span>$</span> <span style=color:#00afe7>clear</span>
</code></pre></div><p>有效路径下会有下划线：</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-plaintext data-lang=plaintext>
<span>$</span> <span style=color:#00afe7>cd</span> <span style=text-decoration:underline>~/Downloads/</span>
</code></pre></div><h2 id=自动建议>自动建议</h2><p>fish 会根据命令行的上下文和历史记录智能的给出命令建议：</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-plaintext data-lang=plaintext>
<span style=color:#75715e># 命令建议</span>
<span>$</span> <span style=color:red>ya</span><span style=color:#949494>rn coverage</span>
<span>$</span> <span style=color:#00afe7>git</span> <span>ch</span><span style=color:#949494>eckout dev</span>
<span style=color:#75715e># 路径建议</span>
<span>$</span> <span style=color:#00afe7>ls</span> <span style=text-decoration:underline>~/Dow</span><span style=color:#949494>nloads/</span>
</code></pre></div><p>如果采纳建议，可以按下<code>→</code> 或 <code>Tab</code>。如果只采纳一部分，可以按下 <code>Alt + →</code>。</p><p>对于按下 <code>Tab</code> 的命令补全，如果有多个可能的结果，fish 会把它们都列出，有的还带有简要介绍。</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-plaintext data-lang=plaintext>
<span>$</span> <span style=color:red>mk</span><span style=color:#949494>dir tmp</span>
<span style=text-decoration:underline>mk</span><span style=color:#949494>dir</span>        <span>(</span><span style=color:#afaf5f>Executable, 54kB</span><span>)</span>  <span style=text-decoration:underline>mk</span><span style=color:#949494>fs.minix</span>       <span>(</span><span style=color:#afaf5f>Executable, 105kB</span><span>)</span>
<span style=text-decoration:underline>mk</span><span style=color:#949494>e2fs</span>     <span> (</span><span style=color:#afaf5f>Executable, 134kB</span><span>)</span>  <span style=text-decoration:underline>mk</span><span style=color:#949494>homedir_helper</span>  <span>(</span><span style=color:#afaf5f>Executable, 21kB</span><span>)</span>
<span style=text-decoration:underline>mk</span><span style=color:#949494>fifo</span>       <span>(</span><span style=color:#afaf5f>Executable, 38kB</span><span>)</span>  <span style=text-decoration:underline>mk</span><span style=color:#949494>lost+found</span>      <span>(</span><span style=color:#afaf5f>Executable, 13kB</span><span>)</span>
<span style=text-decoration:underline>mk</span><span style=color:#949494>fs</span>         <span>(</span><span style=color:#afaf5f>Executable, 13kB</span><span>)</span>  <span style=text-decoration:underline>mk</span><span style=color:#949494>nod</span>             <span>(</span><span style=color:#afaf5f>Executable, 42kB</span><span>)</span>
<span style=background-color:#3a96dd;color:#f2f2f2>…and 5 more rows</span>
</code></pre></div><p>除了补全命令，fish 还可以补全参数。</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-plaintext data-lang=plaintext>
<span>$</span> <span style=color:#00afe7>ls</span> <span>-</span>
<span style=text-decoration:underline>-</span><span style=color:#949494>1</span>                                           <span>(</span><span style=color:#afaf5f>List one entry per line</span><span>)</span>
<span style=text-decoration:underline>-</span><span style=color:#949494>A</span>  <span style=text-decoration:underline>-</span><span style=color:#949494>-almost-all</span>                         <span>(</span><span style=color:#afaf5f>Show hidden except . and ..</span><span>)</span>
<span style=text-decoration:underline>-</span><span style=color:#949494>a</span>  <span style=text-decoration:underline>-</span><span style=color:#949494>-all</span>                                                <span>(</span><span style=color:#afaf5f>Show hidden</span><span>)</span>
<span style=text-decoration:underline>-</span><span style=color:#949494>B</span>  <span style=text-decoration:underline>-</span><span style=color:#949494>-ignore-backups</span>                      <span>(</span><span style=color:#afaf5f>Ignore files ending with ~</span><span>)</span>
<span style=background-color:#3a96dd;color:#f2f2f2>…and 51 more rows</span>
</code></pre></div>你可能会说这些功能都可以用 zsh 实现。<p>确实，zsh 也能做到，但 fish 做得更好，并且这些功能都是 fish 默认支持的，不需要折腾插件，也不需要安装臃肿的 <code>oh-my-zsh</code></p><h2 id=配制>配制</h2><p>虽然 fish 功能强大，但其实并没有多少配置文件需要写，毕竟 fish 的优点之一就是开箱即用嘛。</p><p>fish 的配置文件是 <code>~/.config/fish/config.fish</code>，这个文件默认不存在，需要自己创建。</p><p>这个文件里可以写各种 fish 支持的各种命令和函数，相当于 Bash 的 <code>.bashrc</code>。</p><p>fish 还提供网页配置工具：</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-plaintext data-lang=plaintext>fish_config
</code></pre></div><p>在浏览器中可以交互式配置 fish 的配色、提示符、函数、变量、历史记录和快捷键。
命令补全</p><p><img src=https://mogeko.github.io/blog-images/r/085/fish_config.png alt=fish_config loading=lazy></p><h3 id=关闭问候语>关闭问候语</h3><p>默认情况下，每次启动 fish，fish 都会打印问候语。要关闭问候语，可以在 fish 中运行：</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-plaintext data-lang=plaintext>set -U fish_greeting
</code></pre></div><h3 id=aliases>Aliases</h3><p>fish 也是支持 <code>alias</code> 的，所以你可以在 <code>~/.config/fish/config.fish</code> 使用 <code>alias</code> 定义命令别名。</p><p>或者复用 <code>.bash_aliases</code> (要确保 <code>.bash_aliases</code> 在的语法与 fish 兼容)：</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fish data-lang=fish><span style=color:#75715e># ~/.config/fish/config.fish
</span><span style=color:#75715e></span><span style=color:#66d9ef>set</span> fish_aliases ~/.bash_aliases
<span style=color:#66d9ef>test</span> -r $fish_aliases; <span style=color:#66d9ef>and</span> source $fish_aliases
</code></pre></div><h2 id=那么代价是什么>那么代价是什么？</h2><p>fish 这么强大，就没有一点缺点吗？</p><p><strong>fish 最大的缺点就是它不兼容 POSIX</strong>，也就是说它不能完全兼容 Bash 中的命令，并且没法运行为 Bash 编写的脚本 (这也是我将 fish 作为日常 Shell 最大的顾虑)。</p><p>不过在使用中我发现这并不是什么大问题，因为不兼容的命令大多是在编写脚本时使用的，平常用的很少。而 Shell 脚本大多都会在开头通过 <code>#!/bin/bash</code> 或者 <code>#!/bin/sh</code> 指定运行脚本的 Shell。实在是不行，也可以在命令行中运行 <code>bash</code> 临时切换到 bash 环境中。</p><br><center>·End·</center></div><div class=post-copyright><p class=copyright-item><span>Author:</span>
<span>Mogeko</span></p><p class=copyright-item><span>Link:</span>
<a href=https://mogeko.me/2020/085/>https://mogeko.me/2020/085/</span></p><p class="copyright-item lincese">本文采用<a rel=license href=http://creativecommons.org/licenses/by-nc/4.0/ target=_blank>知识共享署名-非商业性使用 4.0 国际许可协议</a>进行许可</p></div><div class=post-tags><section><i class="iconfont icon-tag"></i>Tag(s):
<span class=tag><a href=https://mogeko.me/tags/gnu/linux/>#gnu/linux</a></span></section><section><a href=javascript:window.history.back();>back</a></span> ·
<span><a href=https://mogeko.me>home</a></span></section></div><div class=post-nav><a href=https://mogeko.me/2020/084/ class=prev rel=prev title="为了让 Rust 编译得更快，我所做的努力 (2020)"><i class="iconfont icon-left"></i>&nbsp;为了让 Rust 编译得更快，我所做的努力 (2020)</a></div><div class=post-comment><div id=utteranc-container><script src=https://utteranc.es/client.js repo=Mogeko/blog-commits issue-term=title theme=preferred-color-scheme crossorigin=anonymous async></script></div></div></article></div></main><footer class=footer><div class=copyright>&copy;
<span itemprop=copyrightYear>2017 - 2020</span>
<span class=with-love><i class="iconfont icon-love"></i></span><span class=author itemprop=copyrightHolder><a href=https://mogeko.me>Mogeko</a> |</span>
<span>Powered by <a href=https://gohugo.io/ target=_blank rel="external nofollow">Hugo</a> & <a href=https://github.com/Mogeko/Mogege target=_blank rel="external nofollow">Mogege</a></span></div></footer><script defer src=/js/vendor_main.min.js></script><script src=https://cdn.jsdelivr.net/npm/pangu@4.0.7/dist/browser/pangu.min.js integrity="sha256-j+yj56cdEY2CwkVtGyz18fNybFGpMGJ8JxG3GSyO2+I=" crossorigin=anonymous></script><script>pangu.spacingPage();</script></div></body></html>